<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="If you're looking for concise and on-topic programming tutorials or cheat sheets and notes with examples, then you are in the right place! You will find courses about Python, web development, databases, and many others. This website is a personal portfolio and was created by one person.">
    <meta name="keywords" content="Programming, Coding, Python, Web Development, C++, HTML Tutorial, CSS Tutorial, Bootstrap Tutorial, Python Tutorial, C++ Tutorial, HTML, CSS, Bootstrap, Software Development, Algorithms, Data Structures, Programming Tutorials, Coding Tips, Code Examples, Programming Resources, Learn Python, Programming Beginner To Expert, Coding Community, Online Coding Courses, MS Access, Databases, OOP, Object Oriented Programming, IT, Computer Science, Data Science, AI, Django, TensorFlow, Java, Java Tutorial, Android, Android Studio, Kotlin, Electronics, Binary">
    <meta name="author" content="Tymoteusz KoÅ‚odziejczyk">
    <link href="font/css/all.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">
    <link href="files/logo.png" rel="icon">
    <link href="files/logo.png" rel="apple-touch-icon">
    <link rel="stylesheet" href="css/fontello.css" type="text/css">
    <link rel="stylesheet" href="css/styles.css" type="text/css">
    <title>Creational patterns</title>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-D76ZFDYLCY"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-D76ZFDYLCY');
    </script>
</head>

<body id="page-top">
    <div id="wrapper">
        <ul class="navbar-nav sidebar sidebar-dark accordion" id="accordionSidebar" style="background-color: #157267;">
            <a class="sidebar-brand d-flex align-items-center justify-content-center" href="index.html">
                    <img src="files/logo.png" alt="Logo" id="logo">
                <div class="sidebar-brand-text mx-3">CPUcademy</div>
            </a>
            
            <hr class="sidebar-divider my-0">
            <li class="nav-item active">
                <a class="nav-link" href="index.html">
                    <i class="icon-home"></i>
                    <span>Home</span></a>
            </li>
            <hr class="sidebar-divider" style="margin-bottom: 0px;">
    
            <li class="nav-item">
                <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseTwo"
                    aria-expanded="true" aria-controls="collapseTwo">
                    <i class="icon-th-list"></i>
                    <span>Tutorials</span>
                </a>
                <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionSidebar">
                    <div class="bg-white py-2 collapse-inner rounded">
                        <a class="collapse-item" href="python.html">Python</a>
                        <a class="collapse-item" href="java.html">Java &amp; Kotlin (Android)</a>
                        <a class="collapse-item" href="cplusplus.html">C++</a>
                        <a class="collapse-item" href="web.html">Basic web stack</a>
                        <a class="collapse-item" href="databases.html">Databases</a>
                        <a class="collapse-item" href="electronics.html">Electronics</a>
                        <a class="collapse-item" href="it-and-computer-basics.html">IT &amp; computer basics</a>
                    </div>
                </div>
            </li>
            <hr class="sidebar-divider">
            <div class="sidebar-heading">About me</div>
            
            <li class="nav-item">
                <a class="nav-link" href="cv.html">
                    <i class="icon-adult"></i>
                    <span>CV</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="portfolio-projects.html">
                    <i class="icon-docs"></i>
                    <span>Portfolio projects</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="services.html">
                    <i class="icon-services"></i>
                    <span>My services</span></a>
            </li>
            <hr class="sidebar-divider">
        </ul>

        <div id="content-wrapper" class="d-flex flex-column">
            <div id="content">
                <button id="sidebarToggleTop" class="btn btn-link d-md-none rounded-circle mr-3">
                    <i class="fa fa-bars" style="color: #157267;"></i>
                </button>

                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-12 mb-4">
                            <div class="card shadow mb-4">
                                <div class="card-header py-3">
                                    <h5 class="m-0 font-weight-bold">Creational patterns</h5>
                                </div>
                                <div class="card-body">
                                    <h3>Table of contents</h3>
                                    
                                    <ul>
                                        <li><a href="#builder" class="link" style="text-decoration: none;">Builder</a></li>
                                        <li><a href="#factories" class="link" style="text-decoration: none;">Factories</a></li>
                                        <li><a href="#prototype" class="link" style="text-decoration: none;">Prototype</a></li>
                                        <li><a href="#singleton" class="link" style="text-decoration: none;">Singleton</a></li>
                                        <li><a href="#multiton" class="link" style="text-decoration: none;">Multiton</a></li>
                                        <li><a href="#dependency-injection" class="link" style="text-decoration: none;">Dependency injection</a></li>
                                    </ul>

                                    <p>Creational patterns deal with construction of objects (explicit - via a constructor, or implicit - via, e.g., dependency injection). An object can be created wholesale (in a single statement) or piecewise (step-by-step).</p>

                                    <h2><a id="builder">Builder</a></h2>

                                    <p>When an object takes long to initialize, provide an API for constructing it succintly. Separate the construction of a complex object from its representation, allowing the same construction process to create various representations. A builder is a separate component for building an object.</p>

                                    <pre class="wp-block-csstricks-code-block code-example" data-line="" style="color: #EFEEEE;"><code markup="tt">
class Pizza:
    def __init__(self):
        self.size = None
        self.cheese = None
        self.pepperoni = False
        self.mushrooms = False
        self.extra_toppings = []

    def __str__(self):
        return f"Pizza(Size: {self.size}, Cheese: {self.cheese}, Pepperoni: {self.pepperoni}, Mushrooms: {self.mushrooms}, Extra Toppings: {self.extra_toppings})"

class PizzaBuilder:
    def __init__(self):
        self.pizza = Pizza()

    def set_size(self, size):
        self.pizza.size = size
        return self # chaining (methods can be executed one after another as the same statement)

    def add_cheese(self, cheese_type):
        self.pizza.cheese = cheese_type
        return self

    def add_pepperoni(self):
        self.pizza.pepperoni = True
        return self

    def add_mushrooms(self):
        self.pizza.mushrooms = True
        return self

    def add_topping(self, topping):
        self.pizza.extra_toppings.append(topping)
        return self

    def build(self):
        return self.pizza

builder = PizzaBuilder()
custom_pizza = builder.set_size("Large").add_cheese("Cheddar").add_pepperoni().add_topping("Olives").build()
print(custom_pizza)

veggie_pizza = builder.set_size("Medium").add_cheese("Mozzarella").add_mushrooms().add_topping("Bell Peppers").add_topping("Onions").build()
print(veggie_pizza)
                                    </code></pre>

                                    <h4>Builder facets</h4>

                                    <p>A builder facet is a specialized component of a builder pattern that focuses on constructing a specific aspect or "facet" of an object, using multiple builders (e.g., for personal details, job details, or address details), while maintaining a fluent interface for chaining methods. A fluent interface allows method calls to be chained together in a readable and expressive way, often by returning the current object after each method call (<code>return self</code>).</p>

                                    <pre class="wp-block-csstricks-code-block code-example" data-line="" style="color: #EFEEEE;"><code markup="tt">
class Person:
    def __init__(self):
        self.name = None
        self.age = None
        
        # Job details
        self.job_title = None
        self.company = None
        self.salary = None
        
        # Address details
        self.street = None
        self.city = None
        self.postal_code = None

    def __str__(self):
        return (
            f"Person(Name: {self.name}, Age: {self.age}, "
            f"Job: {self.job_title} at {self.company} (${self.salary}))"
        )

# The main builder class to manage all facets
class PersonBuilder:
    def __init__(self, person=None):
        if person is None:
            self.person = Person()
        else:
            self.person = person

    @property
    def personal(self):
        return PersonPersonalBuilder(self.person)

    @property
    def job(self):
        return PersonJobBuilder(self.person)

    def build(self):
        return self.person

# Builder facet for personal details
class PersonPersonalBuilder(PersonBuilder):
    def __init__(self, parent_builder):
        super().__init__(parent_builder)

    def set_name(self, name):
        self.person.name = name
        return self

    def set_age(self, age):
        self.person.age = age
        return self

# Builder facet for job details
class PersonJobBuilder(PersonBuilder):
    def __init__(self, parent_builder):
        super().__init__(parent_builder)

    def set_job_title(self, job_title):
        self.person.job_title = job_title
        return self

    def set_company(self, company):
        self.person.company = company
        return self

    def set_salary(self, salary):
        self.person.salary = salary
        return self

builder = PersonBuilder()
person = builder.personal.set_name("John Doe").set_age(30)\
    .job.set_job_title("Software Engineer").set_company("Tech Corp").set_salary(120000)\
    .build()

print(person)
                                    </code></pre>

                                    <h4>Builder inheritance</h4>

                                    <p>Builder facets violate the Open/Closed Principle, because every time we create a new sub-builder, we have to add it to the main builder. Thanks to inheritance, every builder in the example below is open for extansion, but closed for modification. </p>

                                    <pre class="wp-block-csstricks-code-block code-example" data-line="" style="color: #EFEEEE;"><code markup="tt">
class Person:
    def __init__(self):
        self.name = None
        self.job_title = None
        self.salary = None

    def __str__(self):
        return f"{self.name} works as {self.job_title}, earns {self.salary}"

    @staticmethod
    def new():
        return PersonBuilder()

class PersonBuilder:
    def __init__(self):
        self.person = Person()

    def build(self):
        return self.person

class PersonPersonalBuilder(PersonBuilder):
    def called(self, name):
        self.person.name = name
        return self

class PersonJobBuilder(PersonPersonalBuilder):
    def job(self, job_title):
        self.person.job_title = job_title
        return self

class PersonSalaryBuilder(PersonJobBuilder):
    def earns(self, salary):
        self.person.salary = salary
        return self

builder = PersonSalaryBuilder()
person = builder.called("Josh").job("Engineer").earns("100000").build()
print(person)
                                    </code></pre>

                                    <h2><a id="factories">Factories</a></h2>

                                    <h3>Factory method</h3>

                                    <p>A factory method is an alternate constructor. It provides an additional way to create class instances, often with a more descriptive name or specialized logic, while keeping the main <code>__init__()</code> constructor simple. For example, instead of the user's age, we can take his date of birth and then calculate the age. They can be created using the <code>@classmethod</code> (like shown <a href="python-decorators.html#class-methods" class="link">here</a>) or <code>@staticmethod</code> decorator. A class can have multiple alternate constructors.</p>

                                    <pre class="wp-block-csstricks-code-block code-example" data-line="" style="color: #EFEEEE;"><code markup="tt">
class Person:
    def __init__(self, name, age):
        self.__name = name
        self.__age = age

    def __str__(self):
        return f"{self.__name}, {self.__age}"

    @staticmethod
    def from_age(name, age):
        return Person(name, age)

    @staticmethod
    def from_birth_year(name, birth_year):
        return Person(name, 2024 - birth_year)

e = Person.from_age("Josh", 25)
e2 = Person.from_birth_year("John", 1980)

print(e)
print(e2)
                                    </code></pre>

                                    <p>The example above doesn't adhere to the SRP. We should separate the factory methods into a different class called Factory and use them from there.</p>

                                    <pre class="wp-block-csstricks-code-block code-example" data-line="" style="color: #EFEEEE;"><code markup="tt">
class PersonFactory:
    @staticmethod
    def from_age(name, age):
        return Person(name, age)

    @staticmethod
    def from_birth_year(name, birth_year):
        return Person(name, 2024 - birth_year)

class Person:
    factory = PersonFactory() # this is optional (for convenience)
    
    def __init__(self, name, age):
        self.__name = name
        self.__age = age

    def __str__(self):
        return f"{self.__name}, {self.__age}"

e = Person.factory.from_age("Josh", 25)
e2 = Person.factory.from_birth_year("John", 1980)

print(e)
print(e2)
                                    </code></pre>

                                    <h3>Abstract factory</h3>

                                    <p>An abstract factory defines an interface for creating a set of related or dependent objects, with multiple concrete factories implementing this interface to produce different variations of products. In simpler words, an abstract factory defines how factories should be implemented (like an abstract class). Hierarchies of factories can be used to create related objects.</p>

                                    <pre class="wp-block-csstricks-code-block code-example" data-line="" style="color: #EFEEEE;"><code markup="tt">
from abc import ABC, abstractmethod

class Vehicle(ABC):
    @abstractmethod
    def drive(self):
        pass

class Car(Vehicle):
    def drive(self):
        return "Driving a car"

class Bike(Vehicle):
    def drive(self):
        return "Riding a bike"

class VehicleFactory(ABC): # abstract factory
    @abstractmethod
    def create_vehicle(self):
        pass

class CarFactory(VehicleFactory): # concrete factory
    def create_vehicle(self):
        return Car()

class BikeFactory(VehicleFactory):
    def create_vehicle(self):
        return Bike()

def vehicle_client(factory: VehicleFactory):
    vehicle = factory.create_vehicle()
    print(vehicle.drive())

vehicle_client(CarFactory())
vehicle_client(BikeFactory())
                                    </code></pre>

                                    <h2><a id="prototype">Prototype</a></h2>

                                    <p>A prototype allows object cloning instead of creating new instances from scratch, improving efficiency and flexibility. Sometimes it is more efficient to clone an object and modify it, instead of initializing a new one. A prototype is a partially or fully initialized object that we can copy (clone) and modify.</p>

                                    <pre class="wp-block-csstricks-code-block code-example" data-line="" style="color: #EFEEEE;"><code markup="tt">
import copy

class Car:
    def __init__(self, model, color, engine):
        self.model = model
        self.color = color
        self.engine = engine

    def clone(self):
        return copy.deepcopy(self) # creating a deep copy of the object

    def __str__(self):
        return f"{self.color} {self.model} with {self.engine} engine"

car1 = Car("Tesla Model S", "Red", "Electric") # creating an original object

car2 = car1.clone() # cloning the object
car2.color = "Blue" # modifying the cloned object

print(car1)
print(car2)
                                    </code></pre>

                                    <h4>Prototype factory</h4>

                                    <p>A factory provides a convenient API for using prototypes.</p>

                                    <pre class="wp-block-csstricks-code-block code-example" data-line="" style="color: #EFEEEE;"><code markup="tt">
import copy

class Car:
    def __init__(self, model, color, engine):
        self.model = model
        self.color = color
        self.engine = engine

    def clone(self):
        return copy.deepcopy(self) # creating a deep copy of the object

    def __str__(self):
        return f"{self.color} {self.model} with {self.engine} engine"

class CarFactory:
    prototypes = {}

    @classmethod
    def register_prototype(cls, key, engine):
        cls.prototypes[key] = Car("", "", engine)

    @staticmethod
    def __new_car(prototype, model, color): # cloning a prototype and setting model and color
        result = copy.deepcopy(prototype)
        result.model = model
        result.color = color
        return result

    @classmethod
    def new_car(cls, key, model, color): # creating a new car instance from a registered prototype
        if key in cls.prototypes:
            return cls.__new_car(cls.prototypes[key], model, color)
        else:
            raise ValueError("Prototype not found!")

CarFactory.register_prototype("electric", "Electric")
CarFactory.register_prototype("combustion", "V8")

car1 = CarFactory.new_car("electric", "Tesla Model S", "Blue")
car2 = CarFactory.new_car("combustion", "Ford Mustang", "White")

print(car1)
print(car2)
                                    </code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <footer class="sticky-footer bg-white">
                <div class="container my-auto">
                    <div class="copyright text-center my-auto">
                        <span>Copyright &copy; CPUcademy All Rights Reserved | <a href="license-and-sources.html" class="link">License &amp; Sources</a></span>
                    </div>
                </div>
            </footer>
        </div>
    </div>
    <script src="configs/jquery/jquery.min.js"></script>
    <script src="configs/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="configs/script.js"></script>
</body>
</html>