<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="If you're looking for concise and on-topic programming tutorials or cheat sheets and notes with examples, then you are in the right place! You will find courses about Python, web development, databases, and many others. This website is a personal portfolio and was created by one person.">
    <meta name="keywords" content="Programming, Coding, Python, Web Development, C++, HTML Tutorial, CSS Tutorial, Bootstrap Tutorial, Python Tutorial, C++ Tutorial, HTML, CSS, Bootstrap, Software Development, Algorithms, Data Structures, Programming Tutorials, Coding Tips, Code Examples, Programming Resources, Learn Python, Programming Beginner To Expert, Coding Community, Online Coding Courses, MS Access, Databases, OOP, Object Oriented Programming, IT, Computer Science, Data Science, AI, Django, TensorFlow, Java, Java Tutorial, Android, Android Studio, Kotlin, Electronics, Binary">
    <meta name="author" content="Tymoteusz KoÅ‚odziejczyk">
    <link href="font/css/all.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">
    <link href="files/logo.png" rel="icon">
    <link href="files/logo.png" rel="apple-touch-icon">
    <link rel="stylesheet" href="css/fontello.css" type="text/css">
    <link rel="stylesheet" href="css/styles.css" type="text/css">
    <title>Generators</title>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-D76ZFDYLCY"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-D76ZFDYLCY');
    </script>
</head>

<body id="page-top">
    <div id="wrapper">
        <ul class="navbar-nav sidebar sidebar-dark accordion" id="accordionSidebar" style="background-color: #157267;">
            <a class="sidebar-brand d-flex align-items-center justify-content-center" href="index.html">
                    <img src="files/logo.png" alt="Logo" id="logo">
                <div class="sidebar-brand-text mx-3">CPUcademy</div>
            </a>
            
            <hr class="sidebar-divider my-0">
            <li class="nav-item active">
                <a class="nav-link" href="index.html">
                    <i class="icon-home"></i>
                    <span>Home</span></a>
            </li>
            <hr class="sidebar-divider" style="margin-bottom: 0px;">
    
            <li class="nav-item">
                <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseTwo"
                    aria-expanded="true" aria-controls="collapseTwo">
                    <i class="icon-th-list"></i>
                    <span>Tutorials</span>
                </a>
                <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionSidebar">
                    <div class="bg-white py-2 collapse-inner rounded">
                        <a class="collapse-item" href="python.html">Python</a>
                        <a class="collapse-item" href="java.html">Java &amp; Kotlin (Android)</a>
                        <a class="collapse-item" href="cplusplus.html">C++</a>
                        <a class="collapse-item" href="web.html">Basic web stack</a>
                        <a class="collapse-item" href="databases.html">Databases</a>
                        <a class="collapse-item" href="electronics.html">Electronics</a>
                        <a class="collapse-item" href="it-and-computer-basics.html">IT &amp; computer basics</a>
                    </div>
                </div>
            </li>
            <hr class="sidebar-divider">
            <div class="sidebar-heading">About me</div>
            
            <li class="nav-item">
                <a class="nav-link" href="cv.html">
                    <i class="icon-adult"></i>
                    <span>CV</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="portfolio-projects.html">
                    <i class="icon-docs"></i>
                    <span>Portfolio projects</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="services.html">
                    <i class="icon-services"></i>
                    <span>My services</span></a>
            </li>
            <hr class="sidebar-divider">
        </ul>

        <div id="content-wrapper" class="d-flex flex-column">
            <div id="content">
                <button id="sidebarToggleTop" class="btn btn-link d-md-none rounded-circle mr-3">
                    <i class="fa fa-bars" style="color: #157267;"></i>
                </button>

                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-12 mb-4">
                            <div class="card shadow mb-4">
                                <div class="card-header py-3">
                                    <h5 class="m-0 font-weight-bold">Generators</h5>
                                </div>
                                <div class="card-body">                                 
                                    <p>An iterator is an object that facilitates sequential access to elements in a container (e.g., a list, tuple, or dictionary) without requiring all elements to be processed or loaded into memory simultaneously. Instead, it accesses the existing container directly, returning one element at a time (lazy evaluation). The <code>next()</code> function is a built-in function that advances the iterator to the next item in the container and returns its value. If there are no more items to return, it raises a <code>StopIteration</code> exception.</p>

                                    <p>Do not confuse it with an iterable, which is a data structure we can iterate through with a loop.</p>
                                    
                                    <pre class="wp-block-csstricks-code-block code-example" data-line="" style="color: #EFEEEE;"><code markup="tt">
l <span class="sign">=</span> [<span class="text">"1"</span>, <span class="text">"2"</span>, <span class="text">"3"</span>]
iter_l <span class="sign">=</span> <span class="command">iter</span>(l) <span class="comment"># iter() is a built-in function that creates an iterator from an iterable object</span>

<span class="comment"># Iterating through the list</span>
<span class="function">try</span>:
    <span class="function">while True</span>:
        <span class="command">print</span>(<span class="command">next</span>(iter_l))
<span class="function">except StopIteration</span>:
    <span class="function">pass</span>       

<span class="comment"># Restarting the iterator</span>
iter_l <span class="sign">=</span> <span class="command">iter</span>(l)

<span class="function">if</span> <span class="command">len</span>(l) <span class="sign">&gt;</span> 0:
    first_element <span class="sign">=</span> <span class="command">next</span>(iter_l) <span class="comment"># moving to the first element</span>
    l.<span class="command">remove</span>(first_element) <span class="comment"># removing the first element (the iterator is now pointing to the next valid element - "2")</span>

<span class="comment"># Displaying the list after removal</span>
iter_l <span class="sign">=</span> <span class="command">iter</span>(l)
<span class="function">try</span>:
    <span class="function">while True</span>:
        <span class="command">print</span>(<span class="command">next</span>(iter_l))
<span class="function">except StopIteration</span>:
    <span class="function">pass</span>                         
                                    </code></pre>
                                    
                                    <p>We can prevent the <code>StopIteration</code> error by providing a second argument to the <code>next()</code> function (a default value for an exhausted iterator).</p>

                                    <pre class="wp-block-csstricks-code-block code-example" data-line="" style="color: #EFEEEE;"><code markup="tt">
l <span class="sign">=</span> [<span class="text">"1"</span>, <span class="text">"2"</span>, <span class="text">"3"</span>]
iter_l <span class="sign">=</span> <span class="command">iter</span>(l)
<span class="function">while True</span>:
    value <span class="sign">=</span> <span class="command">next</span>(iter_l, <span class="text">"End"</span>)
    <span class="function">if</span> value <span class="sign">==</span> <span class="text">"End"</span>:
        <span class="function">break</span>
    <span class="command">print</span>(value)
                                    </code></pre>
                                    
                                    <p>We can create custom iterables by defining a class that implements the <code>__next__()</code> and <code>__iter__()</code> dunder methods, making the class an iterator.</p>

                                    <pre class="wp-block-csstricks-code-block code-example" data-line="" style="color: #EFEEEE;"><code markup="tt">
<span class="function">class</span> MyList:
    <span class="function">def __init__</span>(<span class="function">self</span>, values):
        <span class="function">self</span>.values <span class="sign">=</span> values

    <span class="function">def __iter__</span>(<span class="function">self</span>):
        <span class="comment"># Initializing the iterator (starting position)</span>
        <span class="function">self</span>.index <span class="sign">=</span> 0
        <span class="function"><span class="function">return</span> self</span> <span class="comment"># returning the class object itself</span>

    <span class="function">def __next__</span>(<span class="function">self</span>):
        <span class="comment"># Checking if there are still elements left</span>
        <span class="function">if self</span>.index <span class="sign">&lt;</span> <span class="command">len</span>(<span class="function">self</span>.values):
            value <span class="sign">=</span> <span class="function">self</span>.values[<span class="function">self</span>.index]
            <span class="function">self</span>.index <span class="sign">+=</span> 1
            <span class="function">return</span> value
        <span class="function">else</span>:
            <span class="function">raise StopIteration</span>

my_list <span class="sign">=</span> <span class="function">MyList</span>([<span class="text">"1"</span>, <span class="text">"2"</span>, <span class="text">"3"</span>])

<span class="comment"># Using the iterator in a loop</span>
<span class="function">for</span> item <span class="function">in</span> my_list:
    <span class="command">print</span>(item)
                                    </code></pre>
                                    
                                    <p>A generator is a more convenient and efficient way to create an iterator object. Unlike traditional iterators, generators are defined using functions that contain one or more <code>yield</code> statements instead of <code>return</code>.</p>
                                    
                                    <p>When the <code>yield</code> instruction executes inside the generator, it pauses its execution, returns a value to the caller (e.g., a <code>for</code> loop or the <code>next()</code> instruction), and resumes the execution. The state of the function, including its local variables and the point of execution, is preserved so that it can resume from where it left off. This behavior allows the generator to produce a sequence of values lazily, one at a time, without storing the entire sequence in memory. Because of that, they are very memory-efficient. Unlike traditional functions that use <code>return</code> and terminate after returning a single value, a generator can yield multiple values over time.</p> 

                                    <pre class="wp-block-csstricks-code-block code-example" data-line="" style="color: #EFEEEE;"><code markup="tt">
<span class="function">def</span> gen(n):
    <span class="function">for</span> i <span class="function">in</span> <span class="command">range</span>(n):
        <span class="function">yield</span> i
    
<span class="function">for</span> x <span class="function">in</span> gen(5):
    <span class="command">print</span>(x)
                                    </code></pre>
                                    
                                    <p>The two examples below have the same output in terms of the values yielded, but they differ in behavior after the last value is yielded. In the second program, the last value printed is <code>4</code>, and not <code>y</code> because when we manually call <code>next()</code>, the generator function halts after yielding all its values (when the generator object is exhausted) and does not proceed to the last <code><span class="command">print</span>("y")</code> statement. In contrast, the loop in the first example automatically handles the entire iteration, which allows it to reach the final <code><span class="command">print</span>("y")</code> statement.</p>

                                    <pre class="wp-block-csstricks-code-block code-example" data-line="" style="color: #EFEEEE;"><code markup="tt">
<span class="function">def</span> generator(n):
    <span class="function">for</span> x <span class="function">in</span> <span class="command">range</span>(n):
        <span class="command">print</span>(<span class="text">"x"</span>)
        <span class="function">yield</span> x
        <span class="command">print</span>(<span class="text">"y"</span>)

<span class="function">for</span> y <span class="function">in</span> generator(5):
    <span class="command">print</span>(y)
                                    </code></pre>

                                    <pre class="wp-block-csstricks-code-block code-example" data-line="" style="color: #EFEEEE;"><code markup="tt">
<span class="function">def</span> generator(n):
    <span class="function">for</span> x <span class="function">in</span> <span class="command">range</span>(n):
        <span class="command">print</span>(<span class="text">"x"</span>)
        <span class="function">yield</span> x
        <span class="command">print</span>(<span class="text">"y"</span>)

x <span class="sign">=</span> generator(5)
<span class="function">for</span> i <span class="function">in</span> <span class="command">range</span>(5):
    <span class="command">print</span>(<span class="command">next</span>(x))
                                    </code></pre>

                                    <h2>Practical examples</h2>

                                    <p>The use case of a generator is such that we can loop through a sequence or a large amount of data without needing to store all of it at once. We use it when we do not care about the data before and after the particular iteration (e.g., when we are processing it right away).</p>

                                    <pre class="wp-block-csstricks-code-block code-example" data-line="" style="color: #EFEEEE;"><code markup="tt">
<span class="function">def</span> read_large_file(file_path):
    <span class="function">with</span> <span class="command">open</span>(file_path, <span class="text">"r"</span>) <span class="function">as</span> file:
        <span class="function">for</span> line <span class="function">in</span> file:
            <span class="function">yield</span> line

<span class="function">def</span> process_line(line):
    <span class="function">if</span> <span class="text">"x"</span> <span class="function">in</span> line:
        <span class="command">print</span>(line)

<span class="function">for</span> line <span class="function">in</span> read_large_file(<span class="text">"huge_file.txt"</span>):
    process_line(line)
                                    </code></pre>

                                    <pre class="wp-block-csstricks-code-block code-example" data-line="" style="color: #EFEEEE;"><code markup="tt">
<span class="function">def</span> powers_of_2(n):
    p <span class="sign">=</span> 1
    <span class="function">for</span> i <span class="function">in</span> <span class="command">range</span>(n):
        <span class="function">yield</span> p
        p <span class="sign">*=</span> 2
    
<span class="function">for</span> x <span class="function">in</span> powers_of_2(8):
    <span class="command">print</span>(x)
                                    </code></pre>

                                    <h2>Addition to the lesson - custom lists</h2>

                                    <p>Earlier, I mentioned creating custom iterables by implementing the <code>__next__()</code> and <code>__iter__()</code> dunder methods, but this should only be done if we need a fully custom iterable. If we only need a custom list with all the built-in methods of a normal list along with some additional functionalities, we can inherit from <code>list</code>.</p>

                                    <pre class="wp-block-csstricks-code-block code-example" data-line="" style="color: #EFEEEE;"><code markup="tt">
<span class="function">class</span> MyList(<span class="function">list</span>):
    <span class="function">def __init__</span>(<span class="function">self</span>, values <span class="sign">=</span> <span class="function">None</span>):
        <span class="function">super</span>().<span class="function">__init__</span>(values <span class="function">or</span> []) <span class="comment"># initializing with values or an empty list</span>
        <span class="function">self</span>.history <span class="sign">=</span> [] <span class="comment"># keeping track of modifications</span>

    <span class="function">def</span> append(<span class="function">self</span>, item):
        <span class="function">self</span>.history.<span class="command">append</span>(<span class="text">f"Appended {item}"</span>) <span class="comment"># log the change</span>
        <span class="function">super</span>().<span class="command">append</span>(item) <span class="comment"># call the original inherited append method</span>

    <span class="function">def</span> remove(<span class="function">self</span>, item):
        <span class="function">if</span> item <span class="function">in self</span>:
            <span class="function">self</span>.history.<span class="command">append</span>(<span class="text">f"Removed {item}"</span>) <span class="comment"># log removal</span>
            <span class="function">super</span>().<span class="command">remove</span>(item)
        <span class="function">else</span>:
            <span class="command">print</span>(<span class="text">f"Item {item} not in list"</span>)

    <span class="function">def</span> show_history(<span class="function">self</span>):
        <span class="function">return</span> <span class="function">self</span>.history

my_list <span class="sign">=</span> <span class="function">MyList</span>([1, 2, 3])
<span class="command">print</span>(<span class="text">"Initial list:"</span>, my_list)
my_list.<span class="command">append</span>(4)
<span class="command">print</span>(<span class="text">"Updated list:"</span>, my_list)
my_list.<span class="command">remove</span>(2)
<span class="command">print</span>(<span class="text">"After removing 2:"</span>, my_list)
<span class="command">print</span>(<span class="text">"Accessing first item:"</span>, my_list[0])
<span class="command">print</span>(<span class="text">"Modification history:"</span>, my_list.show_history())
                                    </code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <footer class="sticky-footer bg-white">
                <div class="container my-auto">
                    <div class="copyright text-center my-auto">
                        <span>Copyright &copy; CPUcademy All Rights Reserved | <a href="license-and-sources.html" class="link">License &amp; Sources</a></span>
                    </div>
                </div>
            </footer>
        </div>
    </div>
    <script src="configs/jquery/jquery.min.js"></script>
    <script src="configs/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="configs/script.js"></script>
</body>
</html>